## **Project Brief: Map-Based Economic Plan Simulator**

### **1. Project Goal & Overview**

The primary objective is to develop a modular, map-based simulation engine. This engine will take a set of high-level parameters from a pre-defined economic plan and procedurally generate a corresponding geographical and economic landscape. The purpose is to visualize the spatial implications of a plan and stress-test its logistical viability against dynamic factors like terrain, distance, and random shocks over a simulated period.

The final output should be a simulation tool where the consequences of an economic plan can be observed dynamically, rather than a static model. You are encouraged to leverage and adapt existing open-source code for procedural generation, pathfinding, and simulation loops.

---

### **2. Core Functional Requirements**

The simulator must perform the following core functions:

* **Initialization:** Automatically load the economic plan generated by the "create plan" button.
* **Procedural Generation:** On initialization, generate a persistent 2D map based on the input parameters. This includes:
    * Generating the terrain according to specified distributions.
    * Placing settlements (cities, towns) and distributing the population.
    * Creating a connecting infrastructure network (roads/rail).
* **Dynamic Simulation:** Run a turn-based or continuous simulation over a user-defined time period. In each time step, the model should:
    * Calculate and update logistics costs for transportation between settlements.
    * Introduce a probabilistic chance for natural disasters to occur, impacting infrastructure and regional output.
    * Seamlessly integrate with the existing dynamic simulation, including export reports and effects on and by the economic plan.
* **Data Output:** Log key simulation data over time (e.g., total logistics costs, disaster impacts, population distribution) for later analysis.
* **Modularity:** The architecture should be modular to allow for future extensions, such as adding detailed economic sector interactions, environmental modeling, or more complex agent-based behaviors.

---

### **3. Simulation Logic & Implementation Instructions**

#### **3.1 Map and Terrain Generation**

* **Framework:** Use a 2D tile-based grid to represent the map. Each tile should have properties like `terrain_type` (flatland, forest, mountain, water), `altitude`, and `resource_level` (can be abstracted initially).
* **Algorithm:** Use a procedural generation algorithm like **Perlin Noise** or **Simplex Noise** to create a natural-looking distribution of terrain. The `terrain distribution` input variables (e.g., 40% forest, 20% mountain) should act as targets for the generation algorithm. Water should be generated first (e.g., coastal areas, rivers) to provide logical locations for settlement.



#### **3.2 Population and Settlement Distribution**

* **Goal:** Place cities and towns in a way that reflects realistic geographic and economic principles.
* **Methodology:**
    1.  **Placement of Cities:** Identify the `number of cities` and place them in the most geographically advantageous locations on the generated map (e.g., on the coast, at river confluences, in resource-rich flatlands).
    2.  **Placement of Towns:** Distribute the `number of towns` in relation to the major cities, forming a hierarchical network. The `urban concentration` variable should influence this:
        * **High Concentration:** Towns cluster closely around major cities.
        * **Low Concentration:** Towns are more evenly dispersed across the map between cities.
    3.  **Population Allocation:** Distribute the `total population` among the settlements and rural areas. Use the `rural population %` to assign a non-settlement population. The remaining urban population should be distributed hierarchically (cities having the largest populations, followed by towns). The `dependency ratio` and `employment rate` can be stored as properties of the overall simulation state.

#### **3.3 Infrastructure Generation**

* **Goal:** Connect settlements with a logical and cost-effective transportation network.
* **Methodology:**
    1.  **Network Graph:** Model the settlements as nodes in a graph.
    2.  **Pathfinding:** Use a pathfinding algorithm like **A\* Search** or **Dijkstra's Algorithm** to generate roads/railways between nodes.
    3.  **Path Cost:** The "cost" of pathfinding should not just be distance. It must be weighted by terrain. For example:
        * `Flatland Cost = 1`
        * `Forest Cost = 3` (requires clearing)
        * `Mountain Cost = 10` (requires tunnels/bridges)
        * `Water Cost = impassable` (unless bridges are implemented)
    This ensures infrastructure realistically routes around difficult terrain.

#### **3.4 Dynamic Simulation Elements**

* **Fuel/Logistics Costs:** This is a key simulation output. For each time step, calculate the cost of moving goods between any two settlements.
    * **Formula:** `Cost = BaseRate * Distance * TerrainMultiplier`
    * This cost can be aggregated to produce a total "logistical friction" metric for the entire economic plan, showing how efficient the spatial arrangement is.
* **Natural Disasters:**
    * **Event System:** Implement a probabilistic event system. Each time step, roll for a chance of a disaster.
    * **Types & Location:** Disasters should be tied to terrain (e.g., floods in low-lying river areas, earthquakes near mountain ranges).
    * **Impact:** A disaster event should have a defined radius of impact, where it can temporarily damage or destroy infrastructure tiles (increasing pathfinding costs) or reduce a settlement's output.

---

### **4. Recommended Academic Sources & Theoretical Frameworks**

To ground the simulation in established theory, consult the following sources to inform the logic for settlement placement, economic interaction, and transportation.

* **For Settlement Hierarchy and Placement:**
    * **Christaller, W. (1933). *Die zentralen Orte in SÃ¼ddeutschland* (Central Places in Southern Germany).**
        * **Concept:** **Central Place Theory**. This is the foundational theory for the model's settlement placement logic. It argues that settlements function as 'central places' providing services to surrounding areas, and that these settlements form a hierarchy. Use this to justify placing smaller towns in the hinterland of larger cities.

* **For Economic Interdependence and Sectoral Logic:**
    * **Leontief, W. (1986). *Input-Output Economics*.**
        * **Concept:** **Input-Output Analysis**. While you won't need to implement a full Leontief matrix, the concept is crucial. It shows that economic sectors are interdependent (e.g., steel production is an input for car manufacturing). This can inform future modules where you simulate flows of goods between settlements specializing in different `economic sectors`.

* **For Spatial Economics and Logistics:**
    * **Krugman, P. (1991). "Increasing Returns and Economic Geography." *Journal of Political Economy*, 99(3), 483-499.**
        * **Concept:** **New Economic Geography**. This work explains why economic activity clusters in cities due to the interplay between transportation costs, economies of scale, and labor pooling. This provides a theoretical justification for the `urban concentration` parameter and the importance of logistics costs in the simulation.

* **For Computational and Simulation Approaches:**
    * **Cockshott, W. P., & Cottrell, A. (1993). *Towards a New Socialism*.**
        * **Concept:** **Feasibility of Central Planning with Modern Computation**. This book provides the ideological and technical rationale for a project like this. It argues that computational tools can solve the massive calculation problems that plagued 20th-century planning attempts. It can inform the overall design philosophy.
    * **Epstein, J. M., & Axtell, R. (1996). *Growing Artificial Societies: Social Science from the Bottom Up*.**
        * **Concept:** **Agent-Based Modeling (ABM)**. This provides a powerful framework for future expansions. Instead of just modeling high-level variables, you could simulate individual "agents" (households, firms) that make decisions based on their local environment. This is an advanced step, but the initial system should be designed with the potential for ABM in mind.